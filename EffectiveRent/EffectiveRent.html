<!DOCTYPE html>
<html>
<head>
    <title>Effective Rent</title>
	<meta charset="utf-8" />
</head>
<body>
    <h1>Parameters:</h1>
    Purchase Price: <input id="purchasePrice" type="number"> <br />
    Closing Costs: <input id="closingCosts" type="number"><br />
    Monthly Expenses: <input id="monthlyExpenses" type="number"><br />
    Property Tax Rate: <input id="propertyTaxRate" type="number"><br />
    Appreciation Rate: <input id="appreciationRate" type="number"><br />
    Percent Down: <input id="percentDown" type="number"><br />
    Interest Rate: <input id="interestRate" type="number"><br />
    Term: <input id="term" type="number"><br />
    Marginal Tax Rate: <input id="marginalTaxRate" type="number"><br />
    Inflation Rate: <input id="inflationRate" type="number"><br />
    Return on Investments: <input id="returnOnInvestments" type="number"><br />
    Time Horizon: <input id="timeHorizon" type="number"><br />

    <h1>Results:</h1>
    DownpaymentOpportunityCost: <input id="downpaymentOpportunityCost" type="number"> <br />
    ClosingOpportunityCost: <input id="closingOpportunityCost" type="number"> <br />
    MortgagePaymentOpportunityCost: <input id="mortgagePaymentOpportunityCost" type="number"> <br />
    MonthlyExpensesOpportunityCost: <input id="monthlyExpensesOpportunityCost" type="number"> <br />
    PropertyTaxOpportunityCost: <input id="propertyTaxOpportunityCost" type="number"> <br />
    RemainingPrincipalOpportunityCost: <input id="remainingPrincipalOpportunityCost" type="number"> <br />
    HouseValue: <input id="houseValue" type="number"> <br />
    TaxRefundValue: <input id="taxRefundValue" type="number"> <br />
    TotalOpportunityCost: <input id="totalOpportunityCost" type="number"> <br />
    EffectiveRent: <input id="effectiveRent" type="number"> <br />

    <script src="Functions.js"></script>
    <script src="HousePurchase.js"></script>

    <script>
        var purchasePrice = 525000
        var closingCosts = 15000
        var monthlyExpenses = 700
        var propertyTaxRate = 0.04
        var appreciationRate = 0.03
        var percentDown = 0.2
        var interestRate = 0.06
        var term = 30
        var marginalTaxRate = 0.28
        var inflationRate = 0.03
        var returnOnInvestments = 0.06
        var timeHorizon = 40

        document.getElementById("purchasePrice").value = purchasePrice;
        document.getElementById("closingCosts").value = closingCosts;
        document.getElementById("monthlyExpenses").value = monthlyExpenses;
        document.getElementById("propertyTaxRate").value = propertyTaxRate;
        document.getElementById("appreciationRate").value = appreciationRate;
        document.getElementById("percentDown").value = percentDown;
        document.getElementById("interestRate").value = interestRate;
        document.getElementById("term").value = term;
        document.getElementById("marginalTaxRate").value = marginalTaxRate;
        document.getElementById("inflationRate").value = inflationRate;
        document.getElementById("returnOnInvestments").value = returnOnInvestments;
        document.getElementById("timeHorizon").value = timeHorizon;

        var downpayment = purchasePrice * percentDown;
        var principal = purchasePrice - downpayment;
        var mortgagePayment = Payment(principal, ToMonthlyRate(interestRate), term * 12);

        var downpaymentOpportunityCost = DownpaymentOpportunityCost(downpayment, returnOnInvestments, timeHorizon);
        var closingOpportunityCost = ClosingOpportunityCost(closingCosts, returnOnInvestments, timeHorizon);
        var mortgagePaymentOpportunityCost = MortagePaymentOpportunityCost(mortgagePayment, term, returnOnInvestments, timeHorizon);
        var monthlyExpensesOpportunityCost = MonthlyExpensesOpportunityCost(monthlyExpenses, inflationRate, returnOnInvestments, timeHorizon);
        var propertyTaxOpportunityCost = PropertyTaxOpportunityCost(purchasePrice, propertyTaxRate, appreciationRate, returnOnInvestments, timeHorizon);
        var remainingPrincipalOpportunityCost = RemainingPrincipal(mortgagePayment, principal, interestRate, term, timeHorizon);
        var houseValue = HouseValue(purchasePrice, appreciationRate, timeHorizon);
        var taxRefundValue = TaxRefundValue(principal, mortgagePayment, interestRate, term, marginalTaxRate, returnOnInvestments, timeHorizon);
        var totalOpportunityCost = downpaymentOpportunityCost + closingOpportunityCost + mortgagePaymentOpportunityCost + monthlyExpensesOpportunityCost
        + propertyTaxOpportunityCost + remainingPrincipalOpportunityCost - houseValue - taxRefundValue;
        var effectiveRent = EffectiveMonthlyCost(totalOpportunityCost, ToMonthlyRate(inflationRate), ToMonthlyRate(returnOnInvestments), 12 * timeHorizon);

        document.getElementById("downpaymentOpportunityCost").value = Math.floor(downpaymentOpportunityCost);
        document.getElementById("closingOpportunityCost").value = Math.floor(closingOpportunityCost);
        document.getElementById("mortgagePaymentOpportunityCost").value = Math.floor(mortgagePaymentOpportunityCost);
        document.getElementById("monthlyExpensesOpportunityCost").value = Math.floor(monthlyExpensesOpportunityCost);
        document.getElementById("propertyTaxOpportunityCost").value = Math.floor(propertyTaxOpportunityCost);
        document.getElementById("remainingPrincipalOpportunityCost").value = Math.floor(remainingPrincipalOpportunityCost);
        document.getElementById("houseValue").value = Math.floor(houseValue);
        document.getElementById("taxRefundValue").value = Math.floor(taxRefundValue);
        document.getElementById("totalOpportunityCost").value = Math.floor(totalOpportunityCost);
        document.getElementById("effectiveRent").value = Math.floor(effectiveRent);

    </script>
</body>
</html>
